<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HygroTrack V2.4.2 Mockup</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f9f8ff; color: #3b4083; }
        .custom-scrollbar::-webkit-scrollbar { height: 6px; width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f9f8ff; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #dbf2f2; border-radius: 20px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- Mock Constants --- [cite: 7, 8, 9, 10, 11]
        const FABRIC_STANDARDS = [
            { label: "100% Cotton", limit: 56 },
            { label: "100% Polyester", limit: 57 },
            { label: "100% Leather", limit: 22 },
            { label: "Packing paper/carton boxes", limit: 10 }
        ];
        const FACTORIES = ["TTT", "TN", "TM2", "VAS"];
        const DEPARTMENTS = ["Fabric Warehouse", "Cutting Room", "Sewing Room", "Print"];
        const ROOM_LINE_DATA = {
            "A": ["PD-SA01", "PD-SA02"],
            "B": ["PD-SB01", "PD-SB02"],
            "H": ["PD-SH01", "PD-SH02"]
        };

        // --- Helper Components & Icons ---
        const Icon = ({ name, size = 20, className = "" }) => {
            useEffect(() => { lucide.createIcons(); }, []);
            return <i data-lucide={name} className={className} style={{ width: size, height: size }}></i>;
        };

        const App = () => {
            const [view, setView] = useState('home');
            const [selectedFactory, setSelectedFactory] = useState('');
            const [selectedDept, setSelectedDept] = useState('');
            const [activeTypeTab, setActiveTypeTab] = useState('Environment');
            const [records, setRecords] = useState([
                { id: 1, factory: 'TTT', department: 'Sewing Room', type: 'Environment', humidity: 68, temperature: 32, user: 'Admin', ampm: 'AM', timestamp: { toDate: () => new Date() }, date: new Date().toLocaleDateString('th-TH'), todo: 'สุ่มตรวจเช็คค่าความชื้น...' }
            ]);

            // --- Logic Hooks --- [cite: 13, 23, 42]
            const checkHumidityDanger = (h, dept) => dept === 'Print' ? h > 50 : h > 65;

            const getActionStatus = (record) => {
                if (record.status === 'Resolved') return "Resolved";
                return checkHumidityDanger(record.humidity, record.department) ? "Take Action" : "No action needed";
            };

            // --- Sub-Views --- [cite: 47, 48, 49, 50, 51]
            const HomeView = () => (
                <div className="max-w-5xl mx-auto p-4 space-y-10">
                    <section className="bg-gradient-to-br from-[#3b4083] to-[#8f8cb8] rounded-[2.5rem] p-8 text-white shadow-2xl">
                        <h1 className="text-4xl font-extrabold tracking-tighter">HygroTrack <br /><span className="text-[#dbf2f2]">V2.4.2 Mockup</span></h1>
                        <p className="mt-4 text-[#F1EDFF] opacity-90">ระบบบันทึกและตรวจสอบค่าความชื้นอัจฉริยะ (Preview Version)</p>
                    </section>
                    
                    <div className="grid lg:grid-cols-12 gap-8">
                        <section className="lg:col-span-4 space-y-4">
                            <h2 className="text-xl font-bold uppercase tracking-tighter flex items-center gap-2"><Icon name="factory"/> Factory</h2>
                            <div className="grid grid-cols-2 gap-3">
                                {FACTORIES.map(f => (
                                    <button key={f} onClick={() => setSelectedFactory(f)} className={`p-6 rounded-[2rem] font-bold border-2 transition-all ${selectedFactory === f ? 'bg-[#3b4083] text-white' : 'bg-white border-[#F1EDFF] text-[#8f8cb8]'}`}>{f}</button>
                                ))}
                            </div>
                        </section>
                        <section className="lg:col-span-8 space-y-4">
                            <h2 className="text-xl font-bold uppercase tracking-tighter flex items-center gap-2"><Icon name="layout"/> Department</h2>
                            <div className="bg-white p-6 rounded-[2.5rem] border border-[#F1EDFF] grid grid-cols-1 md:grid-cols-2 gap-2 max-h-[400px] overflow-y-auto">
                                {DEPARTMENTS.map(d => (
                                    <button key={d} onClick={() => setSelectedDept(d)} className={`flex items-center justify-between p-4 rounded-2xl transition-all ${selectedDept === d ? 'bg-[#3b4083] text-white' : 'bg-[#f9f8ff] text-[#8f8cb8]'}`}>{d}</button>
                                ))}
                            </div>
                        </section>
                    </div>
                    <div className="flex justify-center">
                        <button disabled={!selectedFactory || !selectedDept} onClick={() => setView('dashboard')} className="bg-[#3b4083] text-white px-24 py-5 rounded-full font-black text-xl disabled:opacity-20 shadow-2xl">SELECT</button>
                    </div>
                </div>
            );

            const DashboardView = () => {
                const filtered = records.filter(r => r.factory === selectedFactory && r.department === selectedDept);
                return (
                    <div className="max-w-7xl mx-auto p-4 space-y-6">
                        <div className="flex justify-between items-center">
                            <button onClick={() => setView('home')} className="flex items-center gap-2 font-black uppercase text-sm"><Icon name="chevron-left" /> Home</button>
                            <div className="flex gap-2">
                                <span className="px-4 py-1.5 bg-[#3b4083] text-white rounded-full text-[10px] font-black uppercase">{selectedFactory}</span>
                                <span className="px-4 py-1.5 bg-[#7ab6b5] text-white rounded-full text-[10px] font-black uppercase">{selectedDept}</span>
                            </div>
                        </div>

                        <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                            <div className="bg-white p-6 rounded-[2.5rem] border border-[#F1EDFF] flex flex-col items-center">
                                <span className="text-[10px] font-black uppercase opacity-60">Records</span>
                                <span className="text-2xl font-black">{filtered.length}</span>
                            </div>
                            <button onClick={() => setView('form')} className="p-6 rounded-[2.5rem] bg-[#dbf2f2] border-2 border-[#7ab6b5] flex flex-col items-center justify-center">
                                <Icon name="plus-circle" />
                                <span className="text-[10px] font-black uppercase mt-1">New Entry</span>
                            </button>
                        </div>

                        <div className="bg-white border border-[#F1EDFF] rounded-[3rem] shadow-sm overflow-hidden">
                            <div className="bg-[#3b4083] px-10 py-6 text-white flex items-center gap-4">
                                <Icon name="calendar" /> <h3 className="text-2xl font-black uppercase">Recent Logs</h3>
                            </div>
                            <table className="w-full text-left">
                                <thead className="bg-[#f9f8ff] text-[10px] font-black text-[#8f8cb8] uppercase">
                                    <tr><th className="px-8 py-5">Time</th><th className="px-8 py-5">Temp</th><th className="px-8 py-5">Hygro</th><th className="px-8 py-5">Status</th></tr>
                                </thead>
                                <tbody className="divide-y divide-[#F1EDFF]">
                                    {filtered.map(r => {
                                        const status = getActionStatus(r);
                                        const isDanger = status === 'Take Action';
                                        return (
                                            <tr key={r.id} className={isDanger ? 'bg-orange-50' : ''}>
                                                <td className="px-8 py-6 font-black">{r.ampm}</td>
                                                <td className="px-8 py-6 text-orange-400 font-black">{r.temperature}°C</td>
                                                <td className="px-8 py-6 text-[#7ab6b5] font-black">{r.humidity}%</td>
                                                <td className="px-8 py-6">
                                                    <span className={`px-4 py-1.5 rounded-full text-[10px] font-black uppercase border ${isDanger ? 'bg-orange-100 text-orange-600 border-orange-200' : 'bg-green-100 text-green-600 border-green-200'}`}>
                                                        {status}
                                                    </span>
                                                </td>
                                            </tr>
                                        )
                                    })}
                                </tbody>
                            </table>
                        </div>
                    </div>
                );
            };

            const FormView = () => {
                const [form, setForm] = useState({ temperature: '', humidity: '', ampm: 'AM', user: '' });
                const handleSubmit = (e) => {
                    e.preventDefault();
                    setRecords([{ ...form, id: Date.now(), factory: selectedFactory, department: selectedDept, date: new Date().toLocaleDateString('th-TH') }, ...records]);
                    setView('dashboard');
                };
                return (
                    <div className="max-w-2xl mx-auto p-4">
                        <button onClick={() => setView('dashboard')} className="mb-6 font-black uppercase text-sm">Cancel</button>
                        <form onSubmit={handleSubmit} className="bg-white p-10 rounded-[3rem] shadow-2xl space-y-8 border border-[#F1EDFF]">
                            <h2 className="text-3xl font-black uppercase tracking-tighter">New Entry</h2>
                            <div className="grid grid-cols-2 gap-6">
                                <div className="space-y-2">
                                    <label className="text-[10px] font-black uppercase text-[#8f8cb8]">Temp (°C)</label>
                                    <input required type="number" step="0.1" value={form.temperature} onChange={e => setForm({...form, temperature: e.target.value})} className="w-full p-4 bg-[#f9f8ff] rounded-2xl outline-none font-black" />
                                </div>
                                <div className="space-y-2">
                                    <label className="text-[10px] font-black uppercase text-[#8f8cb8]">Humidity (%)</label>
                                    <input required type="number" step="0.1" value={form.humidity} onChange={e => setForm({...form, humidity: e.target.value})} className="w-full p-4 bg-[#f9f8ff] rounded-2xl outline-none font-black" />
                                </div>
                            </div>
                            <div className="space-y-2">
                                <label className="text-[10px] font-black uppercase text-[#8f8cb8]">Operator</label>
                                <input required type="text" value={form.user} onChange={e => setForm({...form, user: e.target.value})} className="w-full p-4 bg-[#f9f8ff] rounded-2xl outline-none font-bold" placeholder="Name" />
                            </div>
                            <button type="submit" className="w-full py-5 bg-[#3b4083] text-white rounded-2xl font-black uppercase tracking-widest shadow-xl">SAVE DATA</button>
                        </form>
                    </div>
                );
            };

            return (
                <div className="min-h-screen pb-20">
                    <nav className="sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-[#F1EDFF] px-8 py-5 flex items-center justify-between">
                        <div className="flex items-center gap-3">
                            <div className="w-10 h-10 bg-[#3b4083] rounded-xl flex items-center justify-center text-white shadow-lg"><Icon name="thermometer" size={22} /></div>
                            <span className="font-black text-xl tracking-tighter uppercase">HygroTrack</span>
                        </div>
                        <div className="flex items-center gap-2 px-4 py-2 bg-green-50 rounded-full border border-green-100">
                            <div className="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"></div>
                            <span className="text-[10px] font-black text-green-600 uppercase tracking-widest">Live Sync</span>
                        </div>
                    </nav>
                    <main className="mt-8 px-4">
                        {view === 'home' && <HomeView />}
                        {view === 'dashboard' && <DashboardView />}
                        {view === 'form' && <FormView />}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
